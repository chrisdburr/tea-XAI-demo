<!-- api/templates/api/techniques_list.html -->

{% extends 'base.html' %}
{% load static tailwind_tags form_tags %}

{% block title %}Techniques List{% endblock %}

{% block content %}
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold">AI Assurance Techniques</h1>
        <a href="{% url 'html_views:technique_add' %}" class="bg-blue-500 text-white px-4 py-2 rounded mb-4 inline-block">
            Add New Technique
        </a>
    </div>
    <div class="overflow-x-auto">
        <table class="min-w-full bg-white rounded-lg overflow-hidden">
            <thead class="bg-gray-200">
                <tr>
                    <th class="py-3 px-6 text-left text-sm font-semibold text-gray-700">Technique</th>
                    <th class="py-3 px-6 text-left text-sm font-semibold text-gray-700">Assurance Goal</th>
                    <th class="py-3 px-6 text-left text-sm font-semibold text-gray-700">Categories</th>
                    <th class="py-3 px-6 text-left text-sm font-semibold text-gray-700">Sub-Categories</th>
                    <th class="py-3 px-6 text-left text-sm font-semibold text-gray-700">Description</th>
                    <th class="py-3 px-6 text-left text-sm font-semibold text-gray-700">Model Dependency</th>
                    <th class="py-3 px-6 text-left text-sm font-semibold text-gray-700">Example Use-Case</th>
                    <th class="py-3 px-6 text-left text-sm font-semibold text-gray-700">Tags</th>
                </tr>
            </thead>
            <tbody>
                {% for technique in techniques %}
                <tr class="border-b hover:bg-gray-100">
                    <!-- Technique Name -->
                    <td class="py-4 px-6">{{ technique.name }}</td>

                    <!-- Assurance Goal -->
                    <td class="py-4 px-6">
                        {% if technique.assurance_goal %}
                            {{ technique.assurance_goal.name }}
                        {% else %}
                            <span class="text-gray-500 text-sm">N/A</span>
                        {% endif %}
                    </td>

                    <!-- Categories -->
                    <td class="py-4 px-6">
                        {% if technique.categories.all %}
                            {% for category in technique.categories.all %}
                                <span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full mr-1 mb-1">{{ category.name }}</span>
                            {% endfor %}
                        {% else %}
                            <span class="text-gray-500 text-sm">N/A</span>
                        {% endif %}
                    </td>

                    <!-- Sub-Categories -->
                    <td class="py-4 px-6">
                        {% if technique.sub_categories.all %}
                            {% for sub_cat in technique.sub_categories.all %}
                                <span class="inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full mr-1 mb-1">{{ sub_cat.name }}</span>
                            {% endfor %}
                        {% else %}
                            <span class="text-gray-500 text-sm">N/A</span>
                        {% endif %}
                    </td>

                    <!-- Description -->
                    <td class="py-4 px-6">{{ technique.description }}</td>

                    <!-- Model Dependency -->
                    <td class="py-4 px-6">
                        {% if technique.model_dependency %}
                            <span class="inline-block bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full">{{ technique.model_dependency }}</span>
                        {% else %}
                            <span class="text-gray-500 text-sm">N/A</span>
                        {% endif %}
                    </td>

                    <!-- Example Use-Case -->
                    <td class="py-4 px-6">{{ technique.example_use_case }}</td>

                    <!-- Tags -->
                    <td class="py-4 px-6">
                        {% if technique.tags.all %}
                            {% for tag in technique.tags.all %}
                                <span class="inline-block bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full mr-1 mb-1">{{ tag.name }}</span>
                            {% endfor %}
                        {% else %}
                            <span class="text-gray-500 text-sm">No Tags</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Pagination Controls (if implemented) -->
    {% if techniques.has_other_pages %}
    <div class="flex justify-center mt-6">
        <nav class="flex items-center space-x-2">
            {% if techniques.has_previous %}
                <a href="?page={{ techniques.previous_page_number }}" class="px-3 py-2 bg-gray-200 rounded hover:bg-gray-300">Previous</a>
            {% else %}
                <span class="px-3 py-2 bg-gray-100 text-gray-400 rounded">Previous</span>
            {% endif %}

            {% for num in techniques.paginator.page_range %}
                {% if techniques.number == num %}
                    <span class="px-3 py-2 bg-blue-500 text-white rounded">{{ num }}</span>
                {% else %}
                    <a href="?page={{ num }}" class="px-3 py-2 bg-gray-200 rounded hover:bg-gray-300">{{ num }}</a>
                {% endif %}
            {% endfor %}

            {% if techniques.has_next %}
                <a href="?page={{ techniques.next_page_number }}" class="px-3 py-2 bg-gray-200 rounded hover:bg-gray-300">Next</a>
            {% else %}
                <span class="px-3 py-2 bg-gray-100 text-gray-400 rounded">Next</span>
            {% endif %}
        </nav>
    </div>
    {% endif %}
{% endblock %}